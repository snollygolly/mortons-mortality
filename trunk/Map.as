/*The Map class controls the scrolling background. There are four unique background drawings inside a Map movie clip. The background will always scroll by at frame rate until it reaches the end of a drawingat which point the background movie clip will advance to the next frame.*/package{	import flash.display.*	import flash.events.*	import flash.ui.*		public class Map extends MovieClip	{		static public var main;		static public var nb, sb, eb, wb;		//This constructor gets called when the background is loaded to the stage		public function Map()		{			main = this;			x=0;			y=0;			changeMap(22, "x");			//mapHit.alpha=0;			//add an ENTER_FRAME event so we can update its position at frame rate			addEventListener(Event.ENTER_FRAME, enterFrame);			//stop the background movie clip on frame one			stop();		}				//we want this logic to happen at frame rate		public function enterFrame(e:Event)		{			if (rightHit.hitTestObject(Morton.main.hitArea)) { //off screen to the right				//left = true				changeMap(currentFrame, "w");			}			if (leftHit.hitTestObject(Morton.main.hitArea)) { //off screen to the left				changeMap(currentFrame, "e");			}		}				public function changeMap(mapframe:int, dir:String) //east, west, other this is the dir that you want morton to be		{						MM.main.blackMask.visible = true;			switch (dir){				case "x":					gotoAndStop(mapframe);					break;				case "o":					if (Morton.main.y > 300){						Morton.main.y = 100;					}					else					{						Morton.main.y = 300;					}					gotoAndStop(mapframe);					break;				case "e":					Morton.main.x = 500;					gotoAndStop(mapframe-1);					break;				case "w":					Morton.main.x = 50;					gotoAndStop(mapframe+1);					break;			}			drawBounds(currentFrame);			drawDoors(currentFrame);			MM.main.blackMask.visible = false;		}				public function drawBounds(mapframe:int){			wb = -50;			eb = 700;			sb = 330;			nb = 50;			switch (mapframe){				//end hallway cases (a/e)				case 10:				case 20:				case 30:					//A-1,2,3					wb = 20;					break;				case 14:				case 24:				case 34:					//E-1,2,3					eb = 580;					break;				//special cases				case 25:					//a-2a bathroom					wb = 0;					eb = 600;					break;				case 26:					//d-2a supply room					nb = 130;					sb = 400;					wb = 240;					eb = 520;					break;			}		}				public function drawDoors(mapframe:int)		{			Door.killAll();			switch (mapframe){				case 20:					//A-2a - Restroom [25]					MM.main.door = new Door(300, 36);					Door.destlist[Door.destlist.length - 1] = 25;					MM.main.mapClip.addChild(MM.main.door);					break;				case 23:					//D-2a - Supply Room [26]					MM.main.door = new Door(300, 36);					Door.destlist[Door.destlist.length - 1] = 26;					MM.main.mapClip.addChild(MM.main.door);					break;				case 25:					//A-2 - Hallway [20]					MM.main.door = new Door(300, 350);					Door.destlist[Door.destlist.length - 1] = 20;					MM.main.mapClip.addChild(MM.main.door);					break;				case 26:					//D-2 - Hallway [26]					MM.main.door = new Door(300, 415);					Door.destlist[Door.destlist.length - 1] = 23;					MM.main.mapClip.addChild(MM.main.door);					break;			}		}				//this is a handy way to stop the background from scrolling		public function disable()		{			removeEventListener(Event.ENTER_FRAME, enterFrame);		}				//this will set the background back to frame one, reset it's position, and start it scrolling with the ENTER_FRAME event		public function reset()		{			addEventListener(Event.ENTER_FRAME, enterFrame);			gotoAndStop(1);			x=0;		}	}}